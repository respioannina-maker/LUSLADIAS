<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LUS PROTOCOL — LUS Daily</title>
  <style>
    :root{ --blue:#0A84FF; --blue-dark:#086fe0; --bg:#0b1220; --card:#101a2e; --text:#e9eefb; --muted:#a9b6d9; --border:#1f2a44; --input:#0f1830; }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b1220 0%,#0b1220 40%,#0e1530 100%);color:var(--text);
      font:15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;display:flex;align-items:center;justify-content:center;padding:24px}
    .container{width:100%;max-width:1080px;display:grid;gap:16px;grid-template-columns:1.1fr 1fr}
    .brand{grid-column:1/-1;display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border:1px solid var(--border);border-radius:14px;background:linear-gradient(180deg,#0f1830,#0b1328);box-shadow:0 10px 30px rgba(10,132,255,0.08), inset 0 1px 0 rgba(255,255,255,0.04)}
    .brand h1{margin:0;color:#fff;font-size:22px;line-height:1.2}
    .brand .sub{margin-top:4px;color:#cfe2ff;font-size:13px}
    .badge{padding:6px 10px;border-radius:999px;background:rgba(10,132,255,.15);color:#cfe2ff;border:1px solid rgba(10,132,255,.35);font-size:12px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.04)}
    .card h2{margin:0 0 12px 0;font-size:16px;color:#dce6ff}
    .grid{display:grid;gap:12px}
    .cols-2{grid-template-columns:1fr 1fr}
    .cols-3{grid-template-columns:repeat(3,1fr)}
    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
    input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--input);color:var(--text);outline:none;transition:.12s border-color}
    input:focus,select:focus{border-color:#0A84FF}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .btn{appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;background:linear-gradient(180deg,#0A84FF,#086fe0);color:white;box-shadow:0 10px 24px rgba(10,132,255,.25), inset 0 1px 0 rgba(255,255,255,.25);transition:transform .06s ease}
    .btn:active{transform:translateY(1px)} .btn.secondary{background:transparent;color:var(--text);border:1px solid var(--border);box-shadow:none}
    .muted{color:var(--muted);font-size:12px}
    .toast{position:fixed;right:16px;bottom:16px;color:#eafff5;background:rgba(16,185,129,.1);border:1px solid rgba(16,185,129,.5);padding:12px 14px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.35);display:none;max-width:70%}
    .toast.err{background:rgba(239,68,68,.08);border-color:rgba(239,68,68,.5);color:#ffecec}
    .hint{font-size:12px;color:#a9b6d9}
    @media (max-width:980px){.container{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="brand">
      <div>
        <h1>Καθημερινή υπερηχογραφική παρακολούθηση (LUS) σε νοσηλευόμενους με ΟΑΑ</h1>
        <div class="sub">Πνευμονολογική Κλινική — ΠΓΝ Ιωαννίνων</div>
      </div>
      <span class="badge">LUS PROTOCOL</span>
    </div>

    <!-- Αριστερά: Ταυτότητα & LUS -->
    <div class="card">
      <h2>Στοιχεία καταγραφής</h2>
      <div class="grid cols-2">
        <div>
          <label for="operator">Χειριστής (Operator)</label>
          <select id="operator" required>
            <option value="" disabled selected>— επίλεξε —</option>
            <option>Ladias</option>
            <option>Παπανικολάου</option>
            <option>Other</option>
          </select>
        </div>
        <div>
          <label for="nps">NPS (Patient ID)</label>
          <input id="nps" type="text" placeholder="π.χ. 123456" required />
        </div>
        <div>
          <label for="firstName">Όνομα (προαιρετικό)</label>
          <input id="firstName" type="text" />
        </div>
        <div>
          <label for="lastName">Επώνυμο (προαιρετικό)</label>
          <input id="lastName" type="text" />
        </div>
        <div>
          <label for="admDate">Ημ. εισαγωγής (προαιρετικό)</label>
          <input id="admDate" type="date" />
        </div>
        <div>
          <label for="day">Ημέρα</label>
          <select id="day" required>
            <option value="" disabled selected>— D1–D7/Exit —</option>
            <option>D1</option><option>D2</option><option>D3</option><option>D4</option>
            <option>D5</option><option>D6</option><option>D7</option><option>Exit</option>
          </select>
        </div>
        <div>
          <label for="lus">LUS score (0–36)</label>
          <input id="lus" type="number" min="0" max="36" step="1" required />
        </div>
        <div style="display:flex;align-items:end;gap:10px">
          <input id="hourly" type="checkbox" />
          <label for="hourly">Ωριαία καταγραφή</label>
        </div>
        <div>
          <label for="position">Θέση ασθενούς κατά την εξέταση</label>
          <select id="position">
            <option value="" disabled selected>— επίλεξε —</option>
            <option>Καθιστός</option>
            <option>Ημικαθιστός</option>
            <option>Ύπτια</option>
            <option>Πλάγια</option>
          </select>
        </div>
      </div>

      <h2 style="margin-top:16px">Πλευρίτιδα / Consolidation / Pneumo</h2>
      <div class="grid cols-3">
        <div>
          <label for="pleural">Πλευριτικό υγρό</label>
          <select id="pleural">
            <option value="" disabled selected>—</option>
            <option>Όχι</option>
            <option>Ναι</option>
          </select>
        </div>
        <div id="pleuralSideWrap" style="display:none">
          <label for="side">Πλευρά</label>
          <select id="side">
            <option value="" disabled selected>—</option>
            <option>Δεξιά</option>
            <option>Αριστερά</option>
            <option>Αμφοτερόπλευρα</option>
          </select>
        </div>
        <div id="ipdWrap" style="display:none">
          <label for="ipd">Interpleural distance (mm)</label>
          <input id="ipd" type="number" min="0" step="1" />
          <div class="hint">Όγκος Balik (mL): <span id="balik">—</span></div>
        </div>
        <div>
          <label for="cons">Consolidation (cm)</label>
          <input id="cons" type="number" min="0" step="0.1" />
        </div>
        <div>
          <label for="pneumo">Πνευμοθώρακας</label>
          <select id="pneumo">
            <option value="" disabled selected>—</option>
            <option>Όχι</option>
            <option>Ναι</option>
          </select>
        </div>
      </div>

      <div class="row" style="margin-top:14px">
        <button class="btn" id="submitBtn">Καταχώριση</button>
        <button class="btn secondary" id="clearBtn">Καθαρισμός</button>
      </div>
    </div>

    <!-- Δεξιά: Οξυγόνωση & Ημερήσια labs extra -->
    <div class="card">
      <h2>Οξυγόνωση & Ημερήσια labs (extra)</h2>
      <div class="grid cols-2">
        <div>
          <label for="spo2">SpO₂ (%)</label>
          <input id="spo2" type="number" min="50" max="100" step="1" />
        </div>
        <div>
          <label for="fio2">FiO₂ (0.21–1.0)</label>
          <input id="fio2" type="number" min="0.21" max="1" step="0.01" />
          <div class="hint">S/F ratio: <span id="sf">—</span></div>
        </div>
        <div>
          <label for="device">Συσκευή Ο₂</label>
          <select id="device">
            <option value="" disabled selected>—</option>
            <option>NC</option>
            <option>Mask</option>
            <option>Venturi</option>
            <option>HFNO</option>
            <option>NIV</option>
          </select>
        </div>
        <div id="flowWrap" style="display:none">
          <label for="flow">Ροή (L/min)</label>
          <input id="flow" type="number" min="0" step="1" />
        </div>
        <div id="nivWrap" style="display:none">
          <label for="ipap">NIV IPAP (cmH₂O)</label>
          <input id="ipap" type="number" min="0" step="1" />
        </div>
        <div id="nivWrap2" style="display:none">
          <label for="epap">NIV EPAP (cmH₂O)</label>
          <input id="epap" type="number" min="0" step="1" />
        </div>
        <div>
          <label for="crp_extra">CRP (mg/L) — extra</label>
          <input id="crp_extra" type="number" step="0.1" min="0" />
        </div>
        <div>
          <label for="wbc_extra">WBC (×10⁹/L) — extra</label>
          <input id="wbc_extra" type="number" step="0.1" min="0" />
        </div>
      </div>
      <div style="margin-top:10px" class="muted">
        * Τα extra labs αφορούν μόνο τη σημερινή καταγραφή. Η πλήρης αρχική καταχώριση γίνεται στο CRF Master.
      </div>
    </div>

    <!-- Δεξιά: Εργαστηριακά από CRF_Master (εισαγωγή) -->
    <div class="card" id="labsCard">
      <h2>Εργαστηριακά (CRF Master — Ημέρα εισαγωγής)</h2>
      <div class="muted" style="margin-bottom:8px">Φόρτωση με βάση το NPS</div>
      <div id="labsBox" class="grid cols-2" style="gap:8px"><!-- γεμίζει δυναμικά --></div>
    </div>

    <div class="brand" style="justify-content:center">
      <span class="badge">Με την καταχώριση ενημερώνονται: LUS_DailyMatrix, OPR_Operator, LUS_ByUser, LUS_ByNPS, LUS_DailyDetails, LUS_DailyMatrixPlus.</span>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script src="app.js"></script>
</body>
</html>
